#SITE & RELEASE SPECIFIC DATA

    {% set servicename = 'serviceX' %}
    {% set service_version = 'v0.2.0' %}
    {% set host_ip = '127.0.0.1' %}
    {% set svc_tcpport = '50040' %}
    {% set password = 'devstack' %}
    {% set servicetype = servicename %}
    {% set endpointname = servicename ~ service_version %}


#DATA DICTIONARY

devstack:
  local:
    username: stack
    password: {{ password }}
    enabled_services: 'mysql,key'
    os_password: {{ password }}
    host_ip: {{ host_ip }}
    host_ipv6: {{ grains.ipv6[-1] }}
    service_host: {{ host_ip }}

  cli:
    user:
      create:
        {{ servicename }}:
          options:
            domain: default
            password: {{ password }}
            project: service
            enable: True
      delete:
        demo:
          options:
            domain: default
        alt_demo:
          options:
            domain: default
    group:
      create:
        service:
          options:
            domain: default
      add user:
        service:
          target:
            - {{ servicename }}
        admins:
          options:
            domain: default
          target:
            - admin
    role:
      add:
        admin:
          options:
            project: service
            user: {{ servicename }}
        service:
          options:
            project: service
            group: service
    service:
      create:
        {{ servicetype }}:
          options:
            name: {{ servicename }}
            type: identity
            description: OpenSDS Block Storage
            enable: True
    endpoint:
      create:
        '{{ endpointname }} public https://{{ host_ip }}/{{ svc_tcpport }}/{{ service_version }}/%\(tenant_id\)s':
          options:
            region: RegionOne
            enable: True
        '{{ endpointname }} internal https://{{ host_ip }}/{{ svc_tcpport }}/{{ service_version }}/%\(tenant_id\)s':
          options:
            region: RegionOne
            enable: True
        '{{ endpointname }} admin https://{{ host_ip }}/{{ svc_tcpport }}/{{ service_version }}/%\(tenant_id\)s':
          options:
            region: RegionOne
            enable: True
    project:
      delete:
        demo:
          options:
            domain: default
        alt_demo:
          options:
            domain: default
        invisible_to_admin:
          options:
            domain: default

