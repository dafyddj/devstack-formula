# -*- coding: utf-8 -*-
# vim: ft=jinja

{## Start with defaults #}
{% import_yaml 'devstack/defaults.yaml' as defaults %}
{% import_yaml 'devstack/osfamilymap.yaml' as osfamilymap %}
{% import_yaml 'devstack/osmap.yaml' as osmap %}

{% set devstack = salt['grains.filter_by'](
    defaults,
    merge=salt['grains.filter_by']( osfamilymap, grain='os_family',
        merge=salt['grains.filter_by']( osfingermap, grain='osfinger',
            merge=salt['grains.filter_by']( osmap,
                merge=salt['pillar.get']('devstack', {}),
            ),
            base='devstack',
        ),
        base='devstack',
    ),
    base='devstack',
) %}
